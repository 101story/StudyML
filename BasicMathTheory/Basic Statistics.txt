
==================
    통계
==================

http://mathisfun.com/
http://math7.tistory.com/

* 데이터 종류
    - 양적자료
        ->이산형 자료
            사람수 1,2,3명 이항분포 등의 확률질량함수
            사칙 연산이 가능
        -> 연속형 자료
            연속하게 취할수 있는 데이터 확률밀도함수
    - 질적자료
        -> 명목형 자료
            집단, 범주 산술적 의미 없음
        -> 순서형 자료
            순서가 있는 명목형 자료
            성적순 A, B, C..

* Random Variables (확률 변수)
    무작위 시행으로부터 얻어지는 values (들!)
    랜덤으로 얻어질수있는 값 (하나)

* Sample Space (표본공간)
    랜덤으로 얻어질수있는 모든값
    Random Variables X = "The number of Heads"
    So the Sample Space = {0, 1, 2, 3}

*  Discrete 이산
   Continuous 연속

* Central Limit Theorem
    수없이 많은 표본을 뽑으면 대부분 정규분포를 띄가 된다.

* 히스토그램 VS 막대그래프
    히스토그램:연속되는값
    막대그래프:Gap 이 존재함

* 정규분포
    mean = median = mode 가 같음
    mean 을 기준으로 50% 50% 면적으로 나뉨
    mode 최빈값

* 표준편차
    숫자들의 퍼짐 정도
    1, 2, 3 표준편차
    1 표준편차 : 68%
    2 표준편차 : 95%
    3 표준편차 : 99%

* 표준 점수(Standard score) z-score
    : 통계학적으로 정규분포를 만들고 개개의 경우가 표준편차상에 어떤 위치를 차지하는지를 보여주는 차원없는 수치
    1 : 내가 집단 전체가 평균적으로 떨어진 만큼 떨어져 있다.

* 사분위수 (Interquartile Range)
    IQR
    중앙값 아웃라이어 동시에 표현 BOX Plot

    - BOX Plot
        아웃라이어
        상위경계 -------
            삼분위수 * 1.5
        최대값(상귀경계 내측에서 25%)
            25%
            삼분위
                25%
            중앙값 ------
                25%
            일분위
                25%
        최소값(하위경계 내측)
            일분위수 * 1.5
        하위경계 -------
        아웃라이어

* 표준화 Sclae()
    : 기준이 다른 데이터를 비교
    - 평균이 0, 표준 편차를 1로 만드는 것

* 변동계수
    : 평균과 표준편차가 서로 다른 두 데이터를 비교 하기 위해 사용
    - 얼마나 다른지 비율만 보는 것
    - 표준편차를 변균으로 나눠준 값

* 공분산
    : (일변량:한개의 변수) 변수가 두개인 이변량일 때 분산
    - 상관계수는 이미 표준화 되어 있는 값이기 때문에 두변수가 서로다른 스케일 이라도 상관관계를 나타낼 수 있음


* 대수의 법칙 : 아주 많은 횟수로 실험을 시행하게 되면, 어떤 사건이 일어날 상대적 빈도수는 '단한번의 실행'에서 그 사건이 일어날 확률에 점점 가까워지게 된다.

* 확률 : 불확실한 상황에서 어떤 사건이 일어날 가능성 likelihood

http://math7.tistory.com/81
통계적 가설검정

* 표본추출 방법
    단순임의추출법
    계통추출범
    층화임의추출법
    집락추출법
    다단계추출법
    확률비례추출법

* 정렬
    범주형 자료
    수치형 자료

* 표본평균 차이로 그룹 비교
    두 그룹이 차이가 있는데 어느정도 차이가 있는지 알고 싶다.

    1)평균이 59.7 속도를 냄 표준편차 4.6
    2)평균이 44.2 속도를 냄 표준편차 4.7
    두 표본 평균의 차이를 중심에 두고
    표준편차를 다르게 계산해서 (1로둠) 추정표집분포를 만듬

    표본평균들 간의 차를 계속 구해서 정규분포가 만들어짐

    신뢰수준 95%
    1번 그룹이 2번 그룹보다 빠르다.

=====================
확률 분포
=====================
>> 특정 패턴을 띄는 어떤 사건을 확률변수르 ㄹ도입하여 중요한 판단 시점에 확률 분포를 참조하여 불확실한 문제를 논리적으로 추정, 검정 할 수 있음.

* X ~ B(n, p)
    확률변수 x 는 이항분포 B 를 따른다.
    has distribution

* 확률 변수(Random Variables) : set a possible values (가능한 값의 모음)

* Density Estimation
    밀도를 추정
    면적 비율
    확률 밀도함수로 히스토그램을 그리고 면적을 추정함
    막대기 사이에 불연속이 존재함

* Kernel Density Estimation
    http://darkpgmr.tistory.com/147
    * 커널 함수 : 원점을 중심으로 대칭하면서 적분값이 1인 non-negative 함수

    non-parametric 분포가 뭐다라고 알기 힘듬
    kernel 함수를 이용해서 딱딱 떨어진 애들을 매끄럽게 만들어줌
    개별적인 변수들을 개별적으로 커널함수로 만들고
    그것들을 다 더해서 평균을 내서 구함

    히스토그램을 스무딩함

-----  이산확률분포  -------------------
* 이산균등분포(discrete uniform distribution)
    이산확률분포
    확률분포 함수가 정의된 모든 곳에서 그 값이 일정한 분포
    예) 1, 2, 3, 4, 5, 6의 값을 갖는 주사위라면, 이를 던졌을 때 각각의 눈이 나올 확률은 1/6이다.

* 베르누이분포
    성공, 실패 두개의 값만 존재
    여러번에 걸쳐서 하는 실험


* 이항분포
    복원추출
    성공횟수와 실패횟수가 존재
    베르누이 과정을 통해 n번 시행에서 x 번 특정 결과가 나타날 확률


* 다항분포
    복원 추출, 다항시행
    다양한 상황이 설정된 실험

* 초기하분포
    이산확률분포
    비복원추출로 실험
    (N은 전체 제품 수, n은 샘플로 뽑은 제품 수)
    - 평균 : np
    - 분산 : (N-n/N-1)npq

* 기하분포
    이산확률분포
    특정 결과가 처음 나타나기 전까지 시도할 (또는 실패할) 횟수를 확률 변수롤 하는 분포
    처음 성공까지 시도한 횟수
    처음 성공할때까지 실패한 횟수
    매 시행은 독립적

* 음이항 분포
    x 번째에서 k 번쨰 성공할 성공 확률

* 포아송분포 (람다)
    시간과 공간 내에서 발생하는 사건의 발생횟수
    매일 발생되는 교통사고 수
    총 시행횟수가 없고 발생횟수만 의미가 있음
        > 실패에 관한 횟수가 없음
    평균과 분산을 먼저 구하고 확률을 구해야함


-----  연속확률분포  -------------------

* 연속 균등 분포
    확률이 발생할 확률이 똑같음
    일어날 확률이 전부 같다
    면적
    특정 범위 내에서 균등하게 나타나 있을 경우
    범위에서 균등한 확률

* 정규분포
    평균을 기준으로 많고 점점 줄어듬

* 지수분포
    포아송을 따르는 현상에 다음 결과가 나타나기까지 소요시간의 확률 분포
    다음 결과까지의 간격 x 의 분포
    제품의 결점 이후 다음 결점까지의 시간의 분포


    --- 표본분포 ---
    > 표본통계량이 퍼저있는 형태
    확률을 구할때 사용하는것이 아니라 신뢰구간 추정, 가설검증에 사용

* t분포
    연속확률분포
    표본의 수가 작을떄, 모집단의 평균을 알수 없을 때, 정규성을 가질때
    표본 표준 편차를 이용해 모집단을 추정, 검정 하는 분포 (n<30)
    자유도에 따라 엄밀하게 표준화된 표본평균의 확률분포를 채택

* 카이제곱분포(x^2 분포)
    데이터의 중심위치 파악
    분산이 퍼져있는 모습을 분포로 만든것
    한집단의 분산을 파악

* F 분포
    분산을 추정하고 검정할 때 사용하는 분포
    두집단의 분산을 비교
    ANOVA 3개 이상 집단의 분산을 비교하는것


==================
    통계적 추정
==================

* 신뢰수준
    표본이 커질수록 신뢰수준은 커질수 있다.

* 데이터 보기
    표본의개수, 모양, 위치, 자료의 퍼짐정도
    분포, 추정, 검정

* 통계적 추정
    모집단으로부터 표본을 추출하고
    추출된 표본의 통계량을 통해 모수를 추정
    - 점추정 (point estimation) : 하나의 점으로 값을 표현하는 것 (신뢰하기어려움) 특정 통계량만으로 모수를 추정하는 방법
    - 구간추정 (interval estimation) : 점추정치를 중심으로 일정 구간을 만듬 (예: 30대 평균 키는 140~190 사이값이다. 신뢰수준 99%)


* 모평균의 신뢰구간
    모표준편차를 아는 경우
        정규분포
    모표준편차를 모르는 경우
        n=>30 정규분포
        n<30  T 분포 (완만함)

* 신뢰구간과 신뢰수준
    신뢰구간 3.58 ~ 4.12
    신뢰수준 95%
        --> 표본을 더 많이 뽑을 수록 신뢰구간은 변경된다.
    표본 30개씩 100번 뽑았을떄 95번의 표본은 신뢰 할 수 있다.

    충분히 큰 표본  (30개 이상)
    표본 평균

    1-유의수준(알파)

    - 모평균의 신뢰구간 구하는 법
        시그마를 아는 경우
            z 값
        시그마를 모르는 경우
            n>=30 z 값
            n<30 t 값

        정규성 모집단
            z-test
        비정규성 모집단
             30 >= z-test
             30 < t-test

* 전체 모집단의 퍼짐정도
    변동률
    모집단의 표준편차, 분산
    * 카이제곱분포(x^2 분포)
        데이터의 중심위치 파악
        분산이 퍼져있는 모습을 분포로 만든것
    * F 분포
        분산을 추정하고 검정할 때 사용하는 분포
        두집단의 분산을 비교
        ANOVA 3개 이상 집단의 분산을 비교하는것


* 허용오차
    최대한 인정할 오차 범위

* 두 집단을 비교하는 방법
    나누거나 (/) 혹은 빼거나 (-)
    - 모평균을 기준으로 (두 값을 뺴서 사용)
        Z 분포 또는 T 분포 이용
        두 집단의 평균이 얼마나 차이나는지 추정
        U1-U2 를 중심으로 공식을 재배치 (합동평균, 합동분산...)
    - 모분산을 기준으로 (두 값을 나눠서 사용)
        카이제곱, F 분포 이용
        나눌때 사용하는 것이 F분포 (카이제곱 두개를 나눠서 만든 분포)
        분산이 큰집단/분산이 작은집단

    ------------
    두 집단 평균검정으로 두 집단에서 차이가 있는지를 볼수있는거지
    분류문제같은거에서 1인 경우랑 0인경우에 대해서
    온도같은거 t검정하면 그 두 집단이 온도에 대해서 영향받는지 여부까지 생각해볼수있는거고

    그냥 두 집단의 분산이 같다(퍼짐정도가 비슷하다)라는 가정하에서 그냥 평균검정한건데 두집단의 분산검정을 먼저한 다음에 두 집단 분산이 같다라는 결론이나오면 sp를 쓰는거고 같지않다라는 결론이 나오면 다른 공식을 사용해야함
    ------------

* 변동계수
    표준편차로 오판을 할수 있는 부분을 보정해줌
    평균에 따라서 편차가 커도 많이 차이나지 않을 수 있는 것을
    상대적으로 볼 수 있도록 함


==================
    가설검정(test)
==================
>> 모집단의 모수에 대해 기존 가설을 설정하고 표본을 추출하여 얻은 통계량으로 진위를 판단하는 방법

* 가설검증
    귀무가설 VS 대립가설
    1. 무작위로 뽑은 표본의 크기, 평균, 편차 추정표집분포를 만들고
    2. 추정표집분포의 중심점을 귀무가설이 예측한 위치(평균)로 민다.
    3. p value 확인
        내가 뽑은 표본이 20개의 표본중에 한개도 안된다.
        기계가 잘 돌면 내가 뽑은 표본은 20개중 한개도 안된다.
        특이한 표본을 뽑아서 이 표본으로 기계의 불량을 의심해봄
        0.03 : 귀무가설이 맞다고 지지하는 정도
        97% : 귀무가설이 틀렸다고 확신할수 있는 확률
        대립가설을 채택
        레몬을 먹어서 레몬이 시다는 가정을 의심할수 있는 정도 95번 먹었을떄
        -----
        표본이 아주 특이한게 나왔는지
        우연히 나왔을 수도 있다.
        스테로이제를 써서 벌레를 크게 만들자.
        약이 효과가 없어도 긴 벌레가 나올확률이 28%
        대립가설 지지율이 72% (95% 이상 지지를 해야 대립가설을 채택)


* 양측검정과 단측검정
    (값의 범위를 고려하여 검정 유형을 나눔)
    - 양측검정 (같다)
        분포의 양측 꼬리 부분에 표본통계량이 위치하는지 확인 (양쪽다)
    - 단측검정 (크다,작다)
        분포의 단측 꼬리 부분에 표본통계량이 위치하는지 확인 (한쪽에만)

* 유의 수준
    >> 표본 추출방식이나 표본의 수 등에 따라 검정의 오류가 발생할 수 있음
    - 1종 오류 : 귀무가설이 옳은데도 귀무가설을 기각
    - 2종 오류 : 귀무가설이 틀린데도 채택하는 경우

    : 오류의 허용치 0.01, 0.05, 0.1
    모수가 신뢰구간에 들어가지 않을 확률

* 임계치와 채택/기각영역 산출
    - 임계치 : 귀무가설의 채택여부를 결정할 수 있는 한계값

* 검정통계량
    귀무가설의 임계치와 비교하기 위해 추출한 표본통계량 (검정을위해서 뽑은 표본)
    표본들의 분포들이 가지는 임계치와 비교할 값
    분포마다 쓰는 식이 다름 (정규분포, t분포, 카이제곱분포, F분포)
    - 단위가 있는 검정통계량을 임계치와 비교
    - 표준화한 z 값으로 임계치와 비교
    - 검정통계량이 위치한 지점의 오류 확률(p-value 활용) 비교

* 기각역
    귀무가설을 탈락시키는 영역

* 정규성 검정
    shapiro.test 함수로 정규성 검정
    shapiro.test(x)
    - Kolmogorov-Smirnov test 와 Shapiro-wilk test (KW, SW)
        SW 더 보수적이다.
    >> 정규성이 없는 데이터에 t-test 를 하는 경우 낮은 값이 나와 잘못된 결론에 도달할 수 있다.

* 비모수적 검정
    표본이 정규성을 띄지 않는 경우 비모수적 방법으로 검증해야 한다.
    순위합, 부호합
    - wilcox.test()


* t-test
    A. 독립 표본 t-test: 서로 다른 두개의 그룹 간의 평균 비교
    (예: 남자와 여자 간 소득의 차이 비교)
        - 유형 1 문법: t.test(group 1의 관측치, group2의 관측치, t-test 유형, 신뢰범위)
        - 유형 2 문법: t.test(관측치~집단 구분 기준, 데이터프레임, t-test 유형, 신뢰범위)

        등분산성을 만족해야 한다.
        두개의 표본을 뽑으면 분산에 의해서 평균이 달라질수 있다.


    B. 대응 표본 t-test : 하나의 집단에 대한 비교 집단의 전-후 차이를 비교
    (예: 과외를 하기 전과 후의 반 학생들의 성적 변화)

    C. 단일 표본 t-test : 하나의 집단의 평균이 특정 기준보다 유의미하게 다른지 혹은 큰지/작은지를 알아보는 분석 방법

    정규분포를 따르지 않을때 데이터가 한쪽으로 치우쳐저 있을때 검정 데이터에 log 를 취함
    정규분포를 따르지않는다면 첫번째 시도할 일은 log나 square root로 변환을 시켜서 정규분포를 따르면, t-test or z-test


==================
    회귀분석
==================

* 선형회귀 모형
    - 결정 계수
    변수간 인과관계를 선형회귀모형이 어느정도 잘 나타내는 지를 검토해야 함.
    모형 적합도 검사 R^2 : 값이 클수록 모델이 데이터를 잘 설명하고 있음

    가정
        등분산성 가정
        정규성 가정
        독립성 가정

* 단순회귀분석
    단일독립변수
* 다중회귀분석
    여러개의 독립변수
    회귀계수가 적어도 하나 이상 있어야 회귀모형이 의미 있음
    P값은 Pr 0.05 이하의 회귀 95% (커질수록 결정계수가 0일 확률이 높아짐)
    독립변수가 많아지면 자연스럽게 R^2 가 커진다. -> 개선 수정된 결정계수 이용
    분산분석 ANOVA 이용 Fqnsvhdldyd

    변수 선택
    p value 값이 0.05 이상이면 회귀계수가 0일 확률이 높음으로 제거
    전진, 후진, 최상부분집합
    최상부분집합
        step() AIC 통계량 기준
        적을수록 좋음



___
